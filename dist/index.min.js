"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _isRatioModeMap,_isMirrorModeMap,_inputAxisFilter,_ratioCornerOperator,_ratioEdgeOperator,vectorMathFp=require("vector-math-fp"),approxFix=require("approx-fix");function _defineProperty(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_nonIterableRest()}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _iterableToArrayLimit(r,e){var t=[],o=!0,i=!1,a=void 0;try{for(var n,p=r[Symbol.iterator]();!(o=(n=p.next()).done)&&(t.push(n.value),!e||t.length!==e);o=!0);}catch(r){i=!0,a=r}finally{try{o||null==p.return||p.return()}finally{if(i)throw a}}return t}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var modeChoice={normal:"normal",ratio:"ratio",mirror:"mirror",mirrorRatio:"mirrorRatio"},md=modeChoice,markerChoice={left:"left",right:"right",top:"top",bottom:"bottom",leftTop:"leftTop",leftBottom:"leftBottom",rightTop:"rightTop",rightBottom:"rightBottom"},mk=markerChoice,mapKeyStr=function(r){return Object.keys(r).map(function(r){return"'".concat(r,"'")}).join(" | ")},modeChoiceErrMsg="Invalid 'mode' param, it can only be: ".concat(mapKeyStr(modeChoice)),markerChoiceErrMsg="Invalid 'marker' param, it can only be: ".concat(mapKeyStr(markerChoice)),isRatioModeMap=(_defineProperty(_isRatioModeMap={},md.normal,!1),_defineProperty(_isRatioModeMap,md.ratio,!0),_defineProperty(_isRatioModeMap,md.mirror,!1),_defineProperty(_isRatioModeMap,md.mirrorRatio,!0),_isRatioModeMap),isMirrorModeMap=(_defineProperty(_isMirrorModeMap={},md.normal,!1),_defineProperty(_isMirrorModeMap,md.ratio,!1),_defineProperty(_isMirrorModeMap,md.mirror,!0),_defineProperty(_isMirrorModeMap,md.mirrorRatio,!0),_isMirrorModeMap),axisX=[1,0],axisY=[0,1],inputAxisFilter=(_defineProperty(_inputAxisFilter={},mk.left,axisX),_defineProperty(_inputAxisFilter,mk.right,axisX),_defineProperty(_inputAxisFilter,mk.top,axisY),_defineProperty(_inputAxisFilter,mk.bottom,axisY),_inputAxisFilter),inputToSizeFilter=function(){var r;return _defineProperty(r={},mk.left,[-1,0]),_defineProperty(r,mk.right,[1,0]),_defineProperty(r,mk.top,[0,-1]),_defineProperty(r,mk.bottom,[0,1]),_defineProperty(r,mk.leftTop,[-1,-1]),_defineProperty(r,mk.leftBottom,[-1,1]),_defineProperty(r,mk.rightTop,[1,-1]),_defineProperty(r,mk.rightBottom,[1,1]),r}(),k1=function(r){return[r,1]},k2=function(r){return[r,-1]},ratioCornerOperator=(_defineProperty(_ratioCornerOperator={},mk.leftTop,k1),_defineProperty(_ratioCornerOperator,mk.leftBottom,k2),_defineProperty(_ratioCornerOperator,mk.rightTop,k2),_defineProperty(_ratioCornerOperator,mk.rightBottom,k1),_ratioCornerOperator),rx=function(r,e){var t=_slicedToArray(e,2),o=t[0];t[1];return[o,o/r]},ry=function(r,e){var t=_slicedToArray(e,2),o=(t[0],t[1]);return[o*r,o]},ratioEdgeOperator=(_defineProperty(_ratioEdgeOperator={},mk.left,rx),_defineProperty(_ratioEdgeOperator,mk.right,rx),_defineProperty(_ratioEdgeOperator,mk.top,ry),_defineProperty(_ratioEdgeOperator,mk.bottom,ry),_ratioEdgeOperator),resize=function(r){var e=r.startPos,t=r.opts,o=void 0===t?{}:t,i=e.center,a=e.size,n=e.rotate,p=o.startPoint,m=void 0===p?[0,0]:p,d=o.movePoint,s=void 0===d?[0,0]:d,c=o.mode,f=void 0===c?"normal":c,_=o.marker,M=void 0===_?null:_,l={};if(!modeChoice[f])throw modeChoiceErrMsg;if(!markerChoice[M])throw markerChoiceErrMsg;var u,h=inputAxisFilter[M],v=void 0!==h,y=inputToSizeFilter[M],P=ratioCornerOperator[M],k=ratioEdgeOperator[M],x=isRatioModeMap[f],F=isMirrorModeMap[f],g=vectorMathFp.ratioOf(a),C=vectorMathFp.minus(m,s),O=vectorMathFp.rotate(-n,C);if(x)if(v)O=vectorMathFp.times(h,O),u=k(g,u=vectorMathFp.times(y,O));else{var b=P(g);O=b.map(function(r){return r*vectorMathFp.dot(b,O)/Math.pow(vectorMathFp.lenOf(b),2)}),u=vectorMathFp.times(y,O)}else v&&(O=vectorMathFp.times(h,O)),u=vectorMathFp.times(y,O);return F&&(u=u.map(function(r){return 2*r})),l.size=vectorMathFp.add(a,u).map(Math.abs).map(approxFix.approxFix),F||(l.center=vectorMathFp.add(i,vectorMathFp.rotate(n,vectorMathFp.times([.5,.5],O))).map(approxFix.approxFix)),l},move=function(r){var e=r.startPos,t=r.opts,o=void 0===t?{}:t,i=o.startPoint,a=void 0===i?[0,0]:i,n=o.movePoint,p=void 0===n?[0,0]:n,m=e.center,d={};return d.center=vectorMathFp.add(m)(vectorMathFp.minus(a,p)),d},rotate=function(r){var e=r.startPos,t=r.opts,o=void 0===t?{}:t,i=o.startPoint,a=void 0===i?[0,0]:i,n=o.movePoint,p=void 0===n?[0,0]:n,m=e.center,d=e.rotate,s={};return s.rotate=d+vectorMathFp.angleBetween(vectorMathFp.minus(m,a),vectorMathFp.minus(m,p)),s};exports.markerChoice=markerChoice,exports.modeChoice=modeChoice,exports.move=move,exports.resize=resize,exports.rotate=rotate;
//# sourceMappingURL=index.min.js.map
